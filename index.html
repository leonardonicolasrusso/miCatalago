<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Cat√°logo de Controles</title>
  <style>
    :root{
      --bg:#f5f6f8; --ink:#111; --muted:#6b7280; --card:#fff;
      --radius:14px; --shadow:0 6px 18px rgba(0,0,0,.08);
      --accent:#0ea5e9;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;background:var(--bg);color:var(--ink)}
    header{padding:28px 12px 10px;text-align:center;position:sticky;top:0;background:rgba(255,255,255,.7);backdrop-filter:blur(6px);border-bottom:1px solid #e5e7eb;z-index:2}
    h1{margin:0;font-size:clamp(22px,3.5vw,32px)}
    .sub{color:var(--muted);font-size:14px;margin-top:6px}
    main{max-width:1400px;margin:auto;padding:18px}

    /* GRID */
    .grid{
      display:grid;
      grid-template-columns:repeat(auto-fill, minmax(200px,1fr));
      gap:18px;
    }
    .card{
      background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);
      padding:12px;text-align:center;cursor:pointer;transition:transform .15s ease
    }
    .card:hover{transform:translateY(-3px)}
    .card img{
      width:100%;
      aspect-ratio:1/1;          /* cuadradas */
      object-fit:contain;
      background:#f1f3f5;
      border-radius:12px;
    }
    .name{margin-top:8px;font-weight:700;text-transform:uppercase;font-size:14px}

    /* DETAIL */
    .detail{max-width:900px;margin:18px auto;display:none}
    .detail.visible{display:block}
    .crumbs{margin-bottom:14px}
    .crumbs a{color:#2563eb;text-decoration:none}
    .detail-card{
      background:#fff;border-radius:18px;box-shadow:var(--shadow);
      padding:20px;display:grid;gap:20px;grid-template-columns:1.1fr 1fr;
    }
    .detail-img{
      width:100%;
      aspect-ratio:1/1;          /* cuadrada en la ficha tambi√©n */
      object-fit:contain;
      background:#f1f3f5;border-radius:16px;
    }
    .detail h2{margin:0 0 6px 0;text-transform:uppercase}
    .muted{color:var(--muted)}
    .row{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .btn{appearance:none;border:1px solid #e5e7eb;background:#fff;padding:9px 12px;border-radius:12px;font-weight:600;cursor:pointer}
    .btn.primary{background:var(--accent);color:#fff;border-color:transparent}
    .tag{font-size:13px;color:#059669;display:none}

    @media (max-width: 860px){
      .detail-card{grid-template-columns:1fr}
    }
  </style>
</head>
<body>
  <header>
    <h1>CAT√ÅLOGO DE CONTROLES</h1>
    <div class="sub">Haz clic en una card para abrir un <strong>link √∫nico</strong> (vista de una sola imagen). Im√°genes cuadradas.</div>
  </header>

  <main>
    <!-- GRID -->
    <section id="grid" class="grid" aria-live="polite"></section>

    <!-- DETAIL -->
    <section id="detail" class="detail">
      <div class="crumbs"><a href="#" id="backLink">‚Üê Volver al cat√°logo</a></div>
      <div class="detail-card">
        <img id="detailImg" class="detail-img" alt="Control remoto"/>
        <div>
          <h2 id="detailName">LCD 000</h2>
          <div class="row">
            <a id="openLink" style="display:none" class="btn" target="_blank" rel="noopener">Abrir este link</a>
            <button id="shareBtn" class="btn primary">Compartir</button>
            <span id="shared" class="tag">¬°Listo para enviar!</span>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script>
    const gridEl   = document.getElementById('grid');
    const detailEl = document.getElementById('detail');
    const dImg = document.getElementById('detailImg');
    const dName = document.getElementById('detailName');
    const openLink = document.getElementById('openLink');
    const shareBtn = document.getElementById('shareBtn');
    const shared   = document.getElementById('shared');
    const backLink = document.getElementById('backLink');

    // Lista (incluye variantes alfanum√©ricas)
    const items = [
      132,133,401,403,405,406,407,408,409,410,411,412,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440,441,442,443,444,445,446,447,"448","448TH",449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,"467JV",468,469,470,471,472,473,474,475,476,477,478,479,480,481,482,483,484,485,486,487,488,489,490,491,492,493,494,495,496,497,"498","498TH","498TH2",499,500,501,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,517,518,519,520,521,522,523,524,525,526,527,528,529,530,531,532,533,534,535,536,537,538,539,540,541,542,543,544,545,546,547,548,549,550,551,552,553,"553P",554,557,558,559,560,561,562,563,564,565,566,567,568,569,570,571,572,573,574,575,576,577,578,579,580,581,582,583,584,585,586,587,588,589,590,591,592,593,594,595,596,597,598,599,600,611,612,613,614,615,616,617,618,619,620,621,622,623,624,625,626,627,628,629,630,631,632,633,634,635,636,638,639,640,641,642,643,644,645,646,649,654,656,657,658
    ];

    function renderGrid() {
      gridEl.innerHTML = '';
      items.forEach(id => {
        const display = `LCD ${id}`;
        const src = `img/${id}.png`;
        const card = document.createElement('article');
        card.className = 'card';
        card.innerHTML = `
          <img src="${src}" alt="${display}" loading="lazy">
          <div class="name">${display}</div>
        `;
        card.addEventListener('click', () => openDetail(id));
        gridEl.appendChild(card);
      });
    }

    // Navegar a ?id=...
    function openDetail(id){
      const url = new URL(location.href);
      url.searchParams.set('id', id);
      history.pushState({}, '', url);
      showDetail(id);
    }

    // Mostrar ficha individual
    function showDetail(id){
      const src = `img/${id}.png`;
      const name = `LCD ${id}`;
      dImg.src = src; dImg.alt = name;
      dName.textContent = name;

      const link = `${location.origin}${location.pathname}?id=${encodeURIComponent(id)}`;
      openLink.href = link;

      // Compartir nativo con fallback a copiar link
      shareBtn.onclick = async () => {
        const shareData = { title: 'Cat√°logo de Controles', text: `Mir√° este control: ${name}`, url: link };
        try {
          if (navigator.share) {
            await navigator.share(shareData);
            shared.textContent = '‚úÖ Compartido';
          } else {
            await navigator.clipboard.writeText(link);
            shared.textContent = 'üîó Link copiado (compart√≠ manualmente)';
          }
          shared.style.display = 'inline';
          setTimeout(()=> shared.style.display='none', 2000);
        } catch (err) {
          console.log('Cancelado o error al compartir:', err);
        }
      };

      gridEl.style.display = 'none';
      detailEl.classList.add('visible');
      window.scrollTo({top:0, behavior:'smooth'});
    }

    // Volver al cat√°logo (quita ?id)
    backLink.addEventListener('click', (e)=>{
      e.preventDefault();
      const url = new URL(location.href);
      url.searchParams.delete('id');
      history.pushState({}, '', url);
      detailEl.classList.remove('visible');
      gridEl.style.display = 'grid';
    });

    function getId(){ return new URL(location.href).searchParams.get('id'); }
    window.addEventListener('popstate', ()=>{
      const id = getId();
      if(id){ showDetail(id); } else { detailEl.classList.remove('visible'); gridEl.style.display='grid'; }
    });

    // Init
    renderGrid();
    const startId = getId();
    if(startId){ showDetail(startId); }
  </script>
</body>
</html>
